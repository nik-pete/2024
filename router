#############################################
# доменное имя
####Linux:
hostnamectl set-hostname ИМЯ.ДОМен

#########################################################################
#ESR


#Настройка динамической трансляции адресов

r(config)#object-group network LAN							              Создаем профиль адресов локальной сети с именем LAN
r(config-object-group-network)#ip prefix 192.168.2.0/24			Указываем префикс сети которой разрешен выход в публичную сеть
r(config-object-group-network)#exit
r(config)#nat source											                   	Конфигурируем сервис SNAT
r(config-snat)#ruleset NAT							            Создаем набор правил c именем MNAT
r(config-snat-ruleset)#to interface gi1/0/1					      	Указываем, что правила применяются только для пакетов направляющихся в публичную сеть через внешний интерфейс 
r(config-snat-ruleset)#rule 10									              Создаем правило 10
r(config-snat-rule)#match source-address LAN					      	Правила включают проверку адреса источника данных на принадлежность к пулу LAN.
r(config-snat-rule)#action source-nat interface				    	Адреса, попадающие под правило, меняют адрес на адрес внешнего интерфейса
r(config-snat-rule)#enable										                Включаем правило
r(config-snat-rule)#exit
r(config-snat-rule)#exit
r(config-snat-rule)#exit
r(config)#exit
r#commit
r#confirm
r#save



#########################################################################################
############tunnel
#

#ESR
r(config)#tunnel gre <НОМЕР>								                  	Создаём интерфейс gre, где номер произвольное число, например, для R-BR tunnel gre 1
r(config-gre)#ip add <IP АДРЕС ТУННЕЛЯ>					            	Назначение ip адреса, например, для R-BR ip add 10.10.10.2/30
r(config-gre)#local interface <ИМЯ ВНЕШНЕГО ИНТЕРФЕЙСА>        Указываем имя внешнего интерфейса, например, для R-BR local interface gi1/0/1
r(config-gre)#remote address <ВНЕШНИЙ АДРЕС СОСЕДА>			      Указываем внешний адрес противоположенной стороны, например, для R-BR remote address 172.16.4.14
r(config-gre)#mtu <ЗНАЧЕНИЕ>									                  Задание значения mtu для интерфейса, например, для R-BR mtu 1400
r(config-gre)#ttl <ЗНАЧЕНИЕ>									                  Задание значения TTL для интерфейса, например, для R-BR ttl 64
r(config-gre)#ip firewall disable
r(config-gre)#enable
r(config-gre)#exit
r#show tunnel status


###############################################################################


#Настройка DHCP-Server на vESR
r(config)#ip dhcp-server pool <ИМЯ ПУЛА>										                  Создадим пул адресов с именем <ИМЯ ПУЛА>
r(config-dhcp-server)#network <IP АДРЕС СЕТИ>							                	Указываем адрес сети, из которой выдавать адреса
r(config-dhcp-server)#address-range <НАЧАЛЬНЫЙ АДРЕС> - <КОНЕЧНЫЙ АДРЕС>		  Определяем диапазон адресов, разрешенных для распределения
r(config-dhcp-server)#excluded-address-range <АДРЕС> - <АДРЕС>			        	Определяем диапазон адресов, не разрешенных для распределения (команду можно повторять сколько угодно раз, для исключения нужных адресов или диапазонов)
r(config-dhcp-server)#default-router <АДРЕС ШЛЮЗА>						              	Определяем параметра DHCP 3 (список маршрутизаторов по умолчанию)
r(config-dhcp-server)#domain-name "<ДОМЕННОЕ ИМЯ>"						               	Определяем параметра DHCP 15 (доменное имя)		
r(config-dhcp-server)#dns-server <АДРЕС DNS 1>, <АДРЕС DNS 2>			        	Определяем параметра DHCP 6 (список DNS-серверов)
r(config-dhcp-server)#exit

r(config)#ip dhcp-server														Включаем DHCP-сервер







































